pipeline{
    agent any 
    parameters {
        string (name:SPEC ,defaultValue:"cypress/intgeration/**/**",description :"Enter the file")
        choice(name:'BROWSER',choices:['chrome','edge','firefox'], description:"Choose the browser")
    }
}options{
    ansicolor('xtrem')
}
stages{
    stage('Building'){
        echo "Building the Application"
    }
    stage('Testing'){
        steps{
            sh"npm i"
            sh "npx cypress open --browser =${BROWSER} --spec ${SPEC}"
        }
    }
    stage("Deploying"){
        echo "Deploy the application"
    }
}
post {
    always{
        publishHTML([allowMissing: false, alwaysLinkToLastBuild: false, keepAll: true, reportDir: 'cypress/report', reportFiles: 'index.html', reportName: 'HTML Report', reportTitles: '', useWrapperFileDirectly: true])
    }
}